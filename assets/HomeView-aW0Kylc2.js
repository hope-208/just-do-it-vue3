import{d as Y,r as A,a as G,o as u,c as f,w as i,b as a,u as l,e as E,f as I,g as r,t as k,h as v,E as J,i as T,j as O,k as N,l as K,m as H,n as L,p as w,q as U,s as Q,v as F,x as j,_ as W,y as b,F as D,z as $,A as X}from"./index-u5vrzJW6.js";/* empty css                */const M=Y({id:"tasksItemsStore",state:()=>({tasksItems:[{id:0,title:"Разработать минимальный набор для менеджера задач",description:"Функционал: добавление, удаление, получение списка задач, получение одной записи, изменение записи. Запись должна состоять из следующих полей: заголовок, описание, время создания, время изменения, маркер выполнения.",categoryId:0,editableTitle:!1,editableDesc:!1,priority:1,date:"",createAt:"18.05.2024 19:31",updateAt:[],isDone:!0},{id:1,title:"Тестовая задача",description:"Создана для наполнения.",categoryId:0,editableTitle:!1,editableDesc:!1,priority:2,date:"05.05.2024",createAt:"18.05.2024 19:31",updateAt:[],isDone:!1},{id:2,title:"Доработать проект",description:"Добавить группировку задач по категориям, возможность добавления подзадач, расстановки приоритетов.",categoryId:1,editableTitle:!1,editableDesc:!1,priority:3,date:"",createAt:"18.05.2024 19:32",updateAt:[],isDone:!1}],newItem:{id:null,title:"",description:"",categoryId:null,editableTitle:!1,editableDesc:!1,priority:3,date:"",createAt:"",updateAt:[],isDone:!1},editItem:{},activeModalValue:{},isOpenModalLook:!1,isOpenModalEdit:!1,titleModal:"",btnModal:"",activeId:null,action:"",historyAction:{}}),actions:{statusEditableTitle(t,e){var o;if(e!==""){if(e&&this.tasksItems[t].title!==e){let s={};this.tasksItems[t].title=e,s.upTitle=`Задача переименована
    из "${this.tasksItems[t].description}" в "${e}".`,this.historyAction.id=(o=this.tasksItems[t].updateAt)==null?void 0:o.length,this.historyAction.dateChange=this.getNow(),this.historyAction.actions=s,this.tasksItems[t].updateAt.push(this.historyAction),this.historyAction={},s={}}this.tasksItems[t].editableTitle=!this.tasksItems[t].editableTitle}},statusEditableDesc(t,e){var o;if(e!==""){if(e&&this.tasksItems[t].description!==e){let s={};this.tasksItems[t].description=e,s.upDescription=`Описание задачи переименовано
    из "${this.tasksItems[t].description}" в "${e}".`,this.historyAction.id=(o=this.tasksItems[t].updateAt)==null?void 0:o.length,this.historyAction.dateChange=this.getNow(),this.historyAction.actions=s,this.tasksItems[t].updateAt.push(this.historyAction),this.historyAction={},s={}}this.tasksItems[t].editableDesc=!this.tasksItems[t].editableDesc}},statusDone(t){var o;let e={};return this.tasksItems[t].isDone?e.upIsDone="Задача отмечена как невыполненная.":e.upIsDone="Задача отмечена как выполненная.",this.historyAction.id=(o=this.tasksItems[t].updateAt)==null?void 0:o.length,this.historyAction.dateChange=this.getNow(),this.historyAction.actions=e,this.tasksItems[t].updateAt.push(this.historyAction),this.historyAction={},e={},!this.tasksItems[t].isDone},openModal(t,e){this.action=t,t=="add"?(this.isOpenModalEdit=!0,this.activeId=this.tasksItems.length,this.titleModal="Добавить задачу",this.btnModal="Добавить",this.newItem.id=this.activeId,this.newItem.categoryId=0,this.activeModalValue=this.newItem):t=="edit"?(this.isOpenModalEdit=!0,this.titleModal="Редактировать задачу",this.btnModal="Сохранить",this.activeId=e,this.editItem=this.tasksItems[e],this.activeModalValue=this.editItem):(this.titleModal="Просмотр задачи",this.btnModal="Редактировать",this.activeId=e,this.isOpenModalLook=!0)},getNow(){let t=new Date,e;t.getDate()<10?e="0"+t.getDate():e=t.getDate();let o;t.getMonth()+1<10?o="0"+(t.getMonth()+1):o=t.getMonth()+1;let s=t.getFullYear(),n;t.getHours()<10?n="0"+t.getHours():n=t.getHours();let d;return t.getMinutes()<10?d="0"+t.getMinutes():d=t.getMinutes(),`${e}.${o}.${s} ${n}:${d}`},historyChanges(t){var o;let e={};this.activeModalValue.title!==t.title&&(e.upTitle=`Задача переименована
   из "${this.activeModalValue.title}" в "${t.title}".`),this.activeModalValue.description!==t.description&&(this.activeModalValue.description==""?e.upDescription=`Добавлено описание задачи "${t.description}".`:e.upDescription=`Описание задачи переименовано из "${this.activeModalValue.description}" в "${t.description}".`),this.activeModalValue.categoryId!==t.categoryId&&(e.categoryId=`Категория задачи изменена с "${this.activeModalValue.categoryId}" на "${t.categoryId}".`),this.activeModalValue.priority!==t.priority&&(e.upPriority=`Приоритет задачи изменен с "${this.activeModalValue.priority}" на "${t.priority}".`),this.activeModalValue.date!==t.date&&(this.activeModalValue.date==""?e.upDate=`К задаче добавлен дедлайн "${t.date}".`:e.upDate=`Дедлайн задачи изменена с "${this.activeModalValue.date}" на "${t.date}".`),this.activeModalValue.isDone!==t.isDone&&(this.activeModalValue.isDone?e.upIsDone="Задача отмечена как невыполненная.":e.upIsDone="Задача отмечена как выполненная."),this.historyAction&&(this.historyAction.id=(o=this.activeModalValue.updateAt)==null?void 0:o.length,this.historyAction.dateChange=this.getNow(),this.historyAction.actions=e)},saveModalData(t){if(t.title!==""&&t.description!=="")if(this.activeModalValue.title=t.title,this.activeModalValue.description=t.description,this.action=="add")this.activeModalValue.createAt=this.getNow(),this.activeModalValue.id=this.tasksItems.length,this.tasksItems.push(this.activeModalValue),this.closeModal();else if(this.action=="edit")this.historyChanges(t),this.activeModalValue.updateAt.push(this.historyAction),this.tasksItems[this.activeId]=this.activeModalValue,this.closeModal();else{this.action=="edit",this.historyChanges(t),this.openModal(this.action,t.categoryId,t.taskId);return}},closeModal(){this.isOpenModalLook=!1,this.isOpenModalEdit=!1,this.titleModal="",this.btnModal="",this.newItem={id:null,title:"",description:"",categoryId:null,editableTitle:!1,editableDesc:!1,priority:3,date:"",createAt:"",updateAt:[],isDone:!1},this.editItem={},this.activeModalValue={},this.historyAction={},this.activeId=null,this.action=""}},mutations:{deleteTask(t,e){t.$delete(e)}}}),Z={class:"task__btns"},x={name:"TaskItem",props:{task:Number,taskInfo:Object},data(){return{taskId:this.task,taskForm:{title:this.taskInfo.title,description:this.taskInfo.description,isDone:this.taskInfo.isDone,editableTitle:this.editableTitle,editableDesc:this.editableDesc},rulesTask:{title:[{required:!0,message:"Название задачи не может быть пустым.",trigger:"blur"},{min:3,message:"Минимальное количество символов: 3.",trigger:"blur"}],description:[{required:!0,message:"Описание задачи не может быть пустым.",trigger:"blur"},{min:3,message:"Минимальное количество символов: 3.",trigger:"blur"}]}}}},B=Object.assign(x,{setup(t){const e=M();return(o,s)=>{const n=J,d=T,y=O,_=N,p=K,m=H,h=A("Notification"),g=L,P=A("Delete"),V=w,z=U,R=Q,C=G("focus");return u(),f(R,{class:"task",modelValue:o.taskId,"onUpdate:modelValue":s[10]||(s[10]=c=>o.taskId=c)},{default:i(()=>[a(V,{class:"task__content"},{default:i(()=>[a(d,{span:1,style:{"max-width":"20px"}},{default:i(()=>[a(n,{modelValue:o.taskForm.isDone,"onUpdate:modelValue":s[0]||(s[0]=c=>o.taskForm.isDone=c),onChange:s[1]||(s[1]=c=>l(e).statusDone(t.task)),class:"task__check"},null,8,["modelValue"])]),_:1}),a(d,{span:23},{default:i(()=>[a(z,{ref:"refTask",model:o.taskForm,rules:o.rulesTask},{default:i(()=>[a(V,null,{default:i(()=>[a(m,{prop:"title",class:"task__edit"},{default:i(()=>[l(e).tasksItems[t.task].editableTitle?E((u(),f(y,{key:0,modelValue:o.taskForm.title,"onUpdate:modelValue":s[2]||(s[2]=c=>o.taskForm.title=c),class:"task-name-edit",onBlur:s[3]||(s[3]=c=>l(e).statusEditableTitle(t.task,o.taskForm.title)),clearable:"",minlength:3},null,8,["modelValue"])),[[C]]):I("",!0),a(p,{placement:"bottom",width:250,trigger:"hover",content:"Нажмите, чтобы отредактировать."},{reference:i(()=>[l(e).tasksItems[t.task].editableTitle?I("",!0):(u(),f(_,{key:0,style:{"font-weight":"600"},onClick:s[4]||(s[4]=c=>l(e).statusEditableTitle(t.task))},{default:i(()=>[r(k(o.taskForm.title),1)]),_:1}))]),_:1})]),_:1}),v("div",Z,[a(p,{placement:"bottom",width:95,trigger:"hover",content:"Просмотр"},{reference:i(()=>[a(g,{class:"task__btn",size:18},{default:i(()=>[a(h,{onClick:s[5]||(s[5]=c=>l(e).openModal("look",t.task))})]),_:1})]),_:1}),a(p,{placement:"bottom",width:80,trigger:"hover",content:"Удалить"},{reference:i(()=>[a(g,{class:"task__btn",size:18,onClick:s[6]||(s[6]=c=>l(e).deleteTask(o.tasksItems,t.task))},{default:i(()=>[a(P)]),_:1})]),_:1})])]),_:1}),a(m,{prop:"description",class:"task__edit"},{default:i(()=>[l(e).tasksItems[t.task].editableDesc?E((u(),f(y,{key:0,type:"textarea",modelValue:o.taskForm.description,"onUpdate:modelValue":s[7]||(s[7]=c=>o.taskForm.description=c),class:"task-name-edit",onBlur:s[8]||(s[8]=c=>l(e).statusEditableDesc(t.task,o.taskForm.description))},null,8,["modelValue"])),[[C]]):I("",!0),a(p,{placement:"bottom",width:250,trigger:"hover",content:"Нажмите, чтобы отредактировать."},{reference:i(()=>[l(e).tasksItems[t.task].editableDesc?I("",!0):(u(),f(_,{key:0,onClick:s[9]||(s[9]=c=>l(e).statusEditableDesc(t.task))},{default:i(()=>[r(k(l(e).tasksItems[t.task].description),1)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model","rules"]),a(V,{style:{display:"flex","justify-content":"end"}},{default:i(()=>[l(e).tasksItems[t.task].updateAt.length==0?(u(),f(_,{key:0},{default:i(()=>[r("Создано: "+k(l(e).tasksItems[t.task].createAt),1)]),_:1})):(u(),f(_,{key:1},{default:i(()=>{var c;return[r("Обновлено: "+k(l(e).tasksItems[t.task].updateAt[((c=l(e).tasksItems[t.task].updateAt)==null?void 0:c.length)-1].dateChange),1)]}),_:1}))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),tt={class:"my-header"},et={class:"header-popup"},st={name:"AddModalTask",data(){return{taskForm:{title:"",description:""},rulesTask:{title:[{required:!0,message:"Название задачи не может быть пустым.",trigger:"blur"},{min:3,message:"Минимальное количество символов: 3.",trigger:"blur"}],description:[{required:!0,message:"Описание задачи не может быть пустым.",trigger:"blur"},{min:3,message:"Минимальное количество символов: 3.",trigger:"blur"}]}}},methods:{submitForm(){this.$refs.refTaskForm.validate(t=>{if(t)this.resetForm();else return})},resetForm(){this.$refs.refTaskForm.resetFields(),this.$refs.refTaskForm.clearValidate()}}},q=Object.assign(st,{setup(t){const e=M();return(o,s)=>{const n=O,d=H,y=U,_=F,p=j;return u(),f(p,{modelValue:l(e).isOpenModalEdit,"onUpdate:modelValue":s[4]||(s[4]=m=>l(e).isOpenModalEdit=m),width:"50%",onClose:s[5]||(s[5]=m=>(l(e).closeModal,o.resetForm()))},{header:i(()=>[v("div",tt,[v("h4",et,k(l(e).titleModal),1)])]),footer:i(()=>[v("div",null,[a(_,{onClick:s[2]||(s[2]=m=>(l(e).closeModal(),o.resetForm()))},{default:i(()=>[r("Отмена")]),_:1}),a(_,{type:"primary",onClick:s[3]||(s[3]=m=>(l(e).saveModalData(o.taskForm),o.submitForm()))},{default:i(()=>[r(k(l(e).btnModal),1)]),_:1})])]),default:i(()=>[a(y,{ref:"refTaskForm",model:o.taskForm,rules:o.rulesTask},{default:i(()=>[a(d,{class:"form-label",label:"Название",prop:"title"},{default:i(()=>[a(n,{modelValue:o.taskForm.title,"onUpdate:modelValue":s[0]||(s[0]=m=>o.taskForm.title=m),placeholder:"Введите название задачи",clearable:""},null,8,["modelValue"])]),_:1}),a(d,{class:"form-label",label:"Описание",prop:"description"},{default:i(()=>[a(n,{modelValue:o.taskForm.description,"onUpdate:modelValue":s[1]||(s[1]=m=>o.taskForm.description=m),rows:3,type:"textarea",placeholder:"Введите описание задачи"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}}),it={class:"my-header"},ot={class:"header-popup"},at={key:1},lt={name:"LookModalTask",props:["modalValue"],data(){return{isOpenHistory:!1}},methods:{visibleOpenHistory(){this.isOpenHistory=!this.isOpenHistory}}},nt=Object.assign(lt,{setup(t){const e=M();return(o,s)=>{const n=T,d=w,y=F,_=j;return u(),f(_,{modelValue:l(e).isOpenModalLook,"onUpdate:modelValue":s[0]||(s[0]=p=>l(e).isOpenModalLook=p),width:"50%",onClose:s[1]||(s[1]=p=>(l(e).closeModal,o.visibleOpenHistory()))},{header:i(()=>[v("div",it,[v("h4",ot,k(l(e).titleModal),1)])]),default:i(()=>{var p,m;return[a(d,null,{default:i(()=>[a(n,{span:4,style:{"font-weight":"600"}},{default:i(()=>[r("Название:")]),_:1}),a(n,{span:20},{default:i(()=>{var h;return[r(k((h=l(e).tasksItems[l(e).activeId])==null?void 0:h.title),1)]}),_:1})]),_:1}),a(d,null,{default:i(()=>[a(n,{span:4,style:{"font-weight":"600"}},{default:i(()=>[r("Описание:")]),_:1}),a(n,{span:20},{default:i(()=>{var h;return[r(k((h=l(e).tasksItems[l(e).activeId])==null?void 0:h.description),1)]}),_:1})]),_:1}),a(d,null,{default:i(()=>[a(n,{span:4,style:{"font-weight":"600"}},{default:i(()=>[r("Создано:")]),_:1}),a(n,{span:20},{default:i(()=>{var h;return[r(k((h=l(e).tasksItems[l(e).activeId])==null?void 0:h.createAt),1)]}),_:1})]),_:1}),r(" "+k(o.activeId)+" ",1),(p=l(e).tasksItems[l(e).activeId])!=null&&p.updateAt.length?(u(),f(d,{key:0},{default:i(()=>[a(y,{type:"primary",icon:"ArrowDown",onClick:o.visibleOpenHistory,style:{"margin-left":"auto"}},{default:i(()=>[r(" Журнал изменений")]),_:1},8,["onClick"])]),_:1})):I("",!0),o.isOpenHistory?(u(),b("div",at,[a(d,null,{default:i(()=>[a(n,{span:4,style:{"font-weight":"600"}},{default:i(()=>[r("Дата")]),_:1}),a(n,{span:20,style:{"font-weight":"600"}},{default:i(()=>[r("Действия")]),_:1})]),_:1}),(u(!0),b(D,null,$((m=l(e).tasksItems[l(e).activeId])==null?void 0:m.updateAt,h=>(u(),f(d,{key:h},{default:i(()=>[a(n,{span:4},{default:i(()=>[r(k(h.dateChange),1)]),_:2},1024),a(n,{span:20},{default:i(()=>[(u(!0),b(D,null,$(h.actions,g=>(u(),f(d,{key:g},{default:i(()=>[r("— "+k(g),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])):I("",!0)]}),_:1},8,["modelValue"])}}}),S=W(nt,[["__scopeId","data-v-13a80242"]]),rt={class:"main"},dt={name:"HomeView",components:{TaskItem:B,AddModalTask:q,LookModalTask:S},directives:{focus:{inserted(t){t.focus()}}},data(){return{filtredTaskItems:[]}},methods:{}},mt=Object.assign(dt,{setup(t){const e=M();return(o,s)=>{const n=A("Plus"),d=L,y=F,_=w,p=N,m=T,h=X;return u(),b("main",rt,[a(_,{class:"header-task-container"},{default:i(()=>[a(y,{class:"header-task-container__btn",type:"success",onClick:s[0]||(s[0]=g=>l(e).openModal("add",!1))},{default:i(()=>[a(d,{class:"el-icon--left"},{default:i(()=>[a(n)]),_:1}),r(" Добавить задачу ")]),_:1})]),_:1}),a(h,{height:"calc(100vh - 140px)"},{default:i(()=>[a(m,{class:"task-container"},{default:i(()=>[(u(!0),b(D,null,$(l(e).tasksItems,g=>(u(),f(B,{key:g.id,task:g.id,"task-info":g},null,8,["task","task-info"]))),128)),l(e).tasksItems.length==0?(u(),f(p,{key:0},{default:i(()=>[r("Задачи отсутствуют.")]),_:1})):I("",!0)]),_:1})]),_:1}),a(q,{ref:"refModalTask"},null,512),a(S,{ref:"refModalTask",modalValue:l(e).activeModalValue},null,8,["modalValue"])])}}});export{mt as default};
