const __vite__fileDeps=["assets/info-D5Z-z5V7.js","assets/index-CuXNqqDM.js","assets/index-Cg1PoH50.css","assets/pen-BIyw6RhB.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as Q,_ as F,s as C,o as n,c as m,w as i,a as V,t as p,b as a,e as c,f as b,g as M,F as w,r as E,E as H,h as N,i as L,j as S,k as U,l as R,m as j,n as W,u as X,p as Z,q,v as B,x as $,y as z,z as P,A as G,B as tt,C as et,D as st,G as it}from"./index-CuXNqqDM.js";/* empty css                */const O=Q({id:"tasksItemsStore",state:()=>({tasksItems:[{id:0,title:"Разработать минимальный набор для менеджера задач",description:"Функционал: добавление, удаление, получение списка задач, получение одной записи, изменение записи. Запись должна состоять из следующих полей: заголовок, описание, время создания, время изменения, маркер выполнения.",categoryId:0,editableTitle:!1,editableDesc:!1,priority:1,date:"",createAt:"18.05.2024 19:31",updateAt:[],isDone:!0},{id:1,title:"Тестовая задача",description:"Создана для наполнения.",categoryId:0,editableTitle:!1,editableDesc:!1,priority:2,date:"05.05.2024",createAt:"18.05.2024 19:31",updateAt:[],isDone:!1},{id:2,title:"Доработать проект",description:"Добавить группировку задач по категориям, возможность добавления подзадач, расстановки приоритетов.",categoryId:1,editableTitle:!1,editableDesc:!1,priority:3,date:"",createAt:"18.05.2024 19:32",updateAt:[],isDone:!1}],newItem:{id:null,title:"",description:"",categoryId:null,editableTitle:!1,editableDesc:!1,priority:3,date:"",createAt:"",updateAt:[],isDone:!1},editItem:{},activeModalValue:{},isOpenModalLook:!1,isOpenModalEdit:!1,titleModal:"",btnModal:"",activeId:null,action:"",historyAction:{},searchTaskParams:"",filteredTaskItems:[]}),actions:{statusEditableTitle(e,t){var o;if(t!==""){if(t&&this.tasksItems[e].title!==t){let s={};this.tasksItems[e].title=t,s.upTitle=`Задача переименована
    из "${this.tasksItems[e].description}" в "${t}".`,this.historyAction.id=(o=this.tasksItems[e].updateAt)==null?void 0:o.length,this.historyAction.dateChange=this.getNow(),this.historyAction.actions=s,this.tasksItems[e].updateAt.push(this.historyAction),this.historyAction={},s={}}this.tasksItems[e].editableTitle=!this.tasksItems[e].editableTitle,this.filteredTask(this.searchTaskParams)}},statusEditableDesc(e,t){var o;if(t!==""){if(t&&this.tasksItems[e].description!==t){let s={};this.tasksItems[e].description=t,s.upDescription=`Описание задачи переименовано
    из "${this.tasksItems[e].description}" в "${t}".`,this.historyAction.id=(o=this.tasksItems[e].updateAt)==null?void 0:o.length,this.historyAction.dateChange=this.getNow(),this.historyAction.actions=s,this.tasksItems[e].updateAt.push(this.historyAction),this.historyAction={},s={}}this.tasksItems[e].editableDesc=!this.tasksItems[e].editableDesc,this.filteredTask(this.searchTaskParams)}},statusDone(e){var o;let t={};return this.tasksItems[e].isDone?t.upIsDone="Задача отмечена как выполненная.":t.upIsDone="Задача отмечена как невыполненная.",this.historyAction.id=(o=this.tasksItems[e].updateAt)==null?void 0:o.length,this.historyAction.dateChange=this.getNow(),this.historyAction.actions=t,this.tasksItems[e].updateAt.push(this.historyAction),this.historyAction={},t={},!this.tasksItems[e].isDone},openModal(e,t){this.action=e,e=="add"?(this.isOpenModalEdit=!0,this.activeId=this.tasksItems.length,this.titleModal="Добавить задачу",this.btnModal="Добавить",this.newItem.categoryId=0,this.activeModalValue=this.newItem):e=="edit"?(this.isOpenModalEdit=!0,this.titleModal="Редактировать задачу",this.btnModal="Сохранить",this.activeId=t,this.editItem=this.tasksItems[t],this.activeModalValue=this.editItem):(this.titleModal="Просмотр задачи",this.btnModal="Редактировать",this.activeId=t,this.isOpenModalLook=!0)},getNow(){let e=new Date,t;e.getDate()<10?t="0"+e.getDate():t=e.getDate();let o;e.getMonth()+1<10?o="0"+(e.getMonth()+1):o=e.getMonth()+1;let s=e.getFullYear(),l;e.getHours()<10?l="0"+e.getHours():l=e.getHours();let r;return e.getMinutes()<10?r="0"+e.getMinutes():r=e.getMinutes(),`${t}.${o}.${s} ${l}:${r}`},historyChanges(e){var o;let t={};this.activeModalValue.title!==e.title&&(t.upTitle=`Задача переименована
   из "${this.activeModalValue.title}" в "${e.title}".`),this.activeModalValue.description!==e.description&&(this.activeModalValue.description==""?t.upDescription=`Добавлено описание задачи "${e.description}".`:t.upDescription=`Описание задачи переименовано из "${this.activeModalValue.description}" в "${e.description}".`),this.activeModalValue.categoryId!==e.categoryId&&(t.categoryId=`Категория задачи изменена с "${this.activeModalValue.categoryId}" на "${e.categoryId}".`),this.activeModalValue.priority!==e.priority&&(t.upPriority=`Приоритет задачи изменен с "${this.activeModalValue.priority}" на "${e.priority}".`),this.activeModalValue.date!==e.date&&(this.activeModalValue.date==""?t.upDate=`К задаче добавлен дедлайн "${e.date}".`:t.upDate=`Дедлайн задачи изменена с "${this.activeModalValue.date}" на "${e.date}".`),this.activeModalValue.isDone!==e.isDone&&(this.activeModalValue.isDone?t.upIsDone="Задача отмечена как невыполненная.":t.upIsDone="Задача отмечена как выполненная."),this.historyAction&&(this.historyAction.id=(o=this.activeModalValue.updateAt)==null?void 0:o.length,this.historyAction.dateChange=this.getNow(),this.historyAction.actions=t)},saveModalData(e){e.title!==""&&e.description!==""&&(this.activeModalValue.title=e.title,this.activeModalValue.description=e.description,this.action=="add"&&(this.activeModalValue.createAt=this.getNow(),this.activeModalValue.id=this.tasksItems.length,this.tasksItems.push(this.activeModalValue),this.closeModal(),this.filteredTask(this.searchTaskParams)))},closeModal(){this.isOpenModalLook=!1,this.isOpenModalEdit=!1,this.titleModal="",this.btnModal="",this.newItem={id:null,title:"",description:"",categoryId:null,editableTitle:!1,editableDesc:!1,priority:3,date:"",createAt:"",updateAt:[],isDone:!1},this.editItem={},this.activeModalValue={},this.historyAction={},this.activeId=null,this.action=""},deleteTask(e){this.tasksItems.splice(e,1),this.filteredTask(this.searchTaskParams)},filteredTask(e){return this.searchTaskParams=e,this.filteredTaskItems=[],this.tasksItems.forEach(t=>{(t.title.includes(e)||t.description.includes(e))&&this.filteredTaskItems.push(t)}),this.filteredTaskItems}}}),ot={name:"LookModalTask",props:["modalValue"],setup(){const e=O(),{isOpenModalLook:t,titleModal:o,tasksItems:s,activeId:l}=C(e),{closeModal:r}=e;return{isOpenModalLook:t,titleModal:o,tasksItems:s,activeId:l,closeModal:r}},data(){return{isOpenHistory:!1}},methods:{visibleOpenHistory(){this.isOpenHistory=!this.isOpenHistory}}},at={class:"my-header"},lt={class:"header-popup"},nt={key:1};function rt(e,t,o,s,l,r){const d=H,h=N,I=L,g=S;return n(),m(g,{modelValue:s.isOpenModalLook,"onUpdate:modelValue":t[0]||(t[0]=f=>s.isOpenModalLook=f),width:"50%",onClose:t[1]||(t[1]=f=>(s.closeModal,r.visibleOpenHistory()))},{header:i(()=>[V("div",at,[V("h4",lt,p(s.titleModal),1)])]),default:i(()=>{var f,_,v;return[a(h,null,{default:i(()=>[a(d,{span:4,style:{"font-weight":"600"}},{default:i(()=>[c("Название:")]),_:1}),a(d,{span:20},{default:i(()=>{var u;return[c(p((u=s.tasksItems[s.activeId])==null?void 0:u.title),1)]}),_:1})]),_:1}),a(h,null,{default:i(()=>[a(d,{span:4,style:{"font-weight":"600"}},{default:i(()=>[c("Описание:")]),_:1}),a(d,{span:20},{default:i(()=>{var u;return[c(p((u=s.tasksItems[s.activeId])==null?void 0:u.description),1)]}),_:1})]),_:1}),a(h,null,{default:i(()=>[a(d,{span:4,style:{"font-weight":"600"}},{default:i(()=>[c("Создано:")]),_:1}),a(d,{span:20},{default:i(()=>{var u;return[c(p((u=s.tasksItems[s.activeId])==null?void 0:u.createAt),1)]}),_:1})]),_:1}),(f=s.tasksItems[s.activeId])!=null&&f.updateAt.length?(n(),m(h,{key:0},{default:i(()=>[a(I,{type:"primary",icon:"ArrowDown",onClick:r.visibleOpenHistory,style:{"margin-left":"auto"}},{default:i(()=>[c(" Журнал изменений")]),_:1},8,["onClick"])]),_:1})):b("",!0),(_=s.tasksItems[s.activeId])!=null&&_.updateAt.length&&l.isOpenHistory?(n(),M("div",nt,[a(h,null,{default:i(()=>[a(d,{span:4,style:{"font-weight":"600"}},{default:i(()=>[c("Дата")]),_:1}),a(d,{span:20,style:{"font-weight":"600"}},{default:i(()=>[c("Действия")]),_:1})]),_:1}),(n(!0),M(w,null,E((v=s.tasksItems[s.activeId])==null?void 0:v.updateAt,u=>(n(),m(h,{key:u},{default:i(()=>[a(d,{span:4},{default:i(()=>[c(p(u.dateChange),1)]),_:2},1024),a(d,{span:20},{default:i(()=>[(n(!0),M(w,null,E(u.actions,T=>(n(),m(h,{key:T},{default:i(()=>[c("— "+p(T),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])):b("",!0)]}),_:1},8,["modelValue"])}const Y=F(ot,[["render",rt]]),dt={name:"AddModalTask",data(){return{taskForm:{title:"",description:""},rulesTask:{title:[{required:!0,message:"Название задачи не может быть пустым.",trigger:"blur"}],description:[{required:!0,message:"Описание задачи не может быть пустым.",trigger:"blur"}]}}},setup(){const e=O(),{isOpenModalEdit:t,titleModal:o,btnModal:s}=C(e),{closeModal:l,saveModalData:r}=e;return{isOpenModalEdit:t,titleModal:o,btnModal:s,closeModal:l,saveModalData:r}},methods:{submitForm(){this.$refs.refTaskForm.validate(e=>{if(e)this.resetForm();else return})},resetForm(){this.$refs.refTaskForm.resetFields(),this.$refs.refTaskForm.clearValidate()}}},ct={class:"my-header"},ut={class:"header-popup"};function mt(e,t,o,s,l,r){const d=U,h=R,I=j,g=L,f=S;return n(),m(f,{modelValue:s.isOpenModalEdit,"onUpdate:modelValue":t[4]||(t[4]=_=>s.isOpenModalEdit=_),width:"50%",onClose:t[5]||(t[5]=_=>(s.closeModal,r.resetForm()))},{header:i(()=>[V("div",ct,[V("h4",ut,p(s.titleModal),1)])]),footer:i(()=>[V("div",null,[a(g,{onClick:t[2]||(t[2]=_=>(s.closeModal(),r.resetForm()))},{default:i(()=>[c("Отмена")]),_:1}),a(g,{type:"primary",onClick:t[3]||(t[3]=_=>(s.saveModalData(l.taskForm),r.submitForm()))},{default:i(()=>[c(p(s.btnModal),1)]),_:1})])]),default:i(()=>[a(I,{ref:"refTaskForm",model:l.taskForm,rules:l.rulesTask},{default:i(()=>[a(h,{class:"form-label",label:"Название",prop:"title"},{default:i(()=>[a(d,{modelValue:l.taskForm.title,"onUpdate:modelValue":t[0]||(t[0]=_=>l.taskForm.title=_),placeholder:"Введите название задачи",clearable:""},null,8,["modelValue"])]),_:1}),a(h,{class:"form-label",label:"Описание",prop:"description"},{default:i(()=>[a(d,{modelValue:l.taskForm.description,"onUpdate:modelValue":t[1]||(t[1]=_=>l.taskForm.description=_),rows:3,type:"textarea",placeholder:"Введите описание задачи"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}const J=F(dt,[["render",mt]]),_t=(e,t,o)=>{const s=e[t];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((l,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==o?". Note that variables only represent file names one level deep.":""))))})},kt={__name:"CustomIcon",props:{name:{type:String,required:!0}},setup(e){const t=e,o=Z(()=>_t(Object.assign({"../assets/icon/info.svg":()=>q(()=>import("./info-D5Z-z5V7.js"),__vite__mapDeps([0,1,2])),"../assets/icon/pen.svg":()=>q(()=>import("./pen-BIyw6RhB.js"),__vite__mapDeps([3,1,2]))}),`../assets/icon/${t.name}.svg`,4));return(s,l)=>(n(),m(W(X(o)),{class:"icon"}))}},ht={name:"TaskItem",components:{Icon:kt},props:{task:Number,taskInfo:Object},setup(){const e=O(),{tasksItems:t}=C(e),{openModal:o,deleteTask:s,statusEditableTitle:l,statusEditableDesc:r,statusDone:d}=e;return{tasksItems:t,openModal:o,deleteTask:s,statusEditableTitle:l,statusEditableDesc:r,statusDone:d}},directives:{focus:{inserted(e){e.focus()}}},data(){return{taskId:this.task,taskForm:{title:this.taskInfo.title,description:this.taskInfo.description,isDone:this.taskInfo.isDone,editableTitle:this.editableTitle,editableDesc:this.editableDesc},rulesTask:{title:[{required:!0,message:"Название задачи не может быть пустым.",trigger:"blur"},{min:3,message:"Минимальное количество символов: 3.",trigger:"blur"}],description:[{required:!0,message:"Описание задачи не может быть пустым.",trigger:"blur"},{min:3,message:"Минимальное количество символов: 3.",trigger:"blur"}]}}}},ft={class:"task__btns"};function pt(e,t,o,s,l,r){const d=$,h=H,I=U,g=z,f=R,_=P("icon"),v=G,u=tt,T=P("Delete"),A=N,x=j,y=et,D=st("focus");return n(),m(y,{class:"task"},{default:i(()=>[a(x,{ref:"refTask",model:l.taskForm,rules:l.rulesTask},{default:i(()=>[a(A,{class:"task__content"},{default:i(()=>[a(h,{span:1,style:{"max-width":"20px"}},{default:i(()=>[a(d,{modelValue:s.tasksItems[o.task].isDone,"onUpdate:modelValue":t[0]||(t[0]=k=>s.tasksItems[o.task].isDone=k),onChange:t[1]||(t[1]=k=>s.statusDone(o.task)),class:"task__check"},null,8,["modelValue"])]),_:1}),a(h,{span:23},{default:i(()=>[a(A,null,{default:i(()=>[a(f,{prop:"title",class:"task__edit"},{default:i(()=>[s.tasksItems[o.task].editableTitle?B((n(),m(I,{key:0,modelValue:l.taskForm.title,"onUpdate:modelValue":t[2]||(t[2]=k=>l.taskForm.title=k),class:"task-name-edit",onBlur:t[3]||(t[3]=k=>s.statusEditableTitle(o.task,l.taskForm.title)),clearable:"",minlength:3},null,8,["modelValue"])),[[D]]):b("",!0),s.tasksItems[o.task].editableTitle?b("",!0):(n(),m(g,{key:1,class:"task__title",onClick:t[4]||(t[4]=k=>s.statusEditableTitle(o.task))},{default:i(()=>[c(p(l.taskForm.title),1)]),_:1}))]),_:1}),V("div",ft,[a(u,{placement:"bottom",width:95,trigger:"hover",content:"Просмотр"},{reference:i(()=>[a(v,{class:"task__btn",size:18,onClick:t[6]||(t[6]=k=>s.deleteTask(s.tasksItems,o.task))},{default:i(()=>[a(_,{name:"info",class:"task__btn",onClick:t[5]||(t[5]=k=>s.openModal("look",o.task))})]),_:1})]),_:1}),a(u,{placement:"bottom",width:80,trigger:"hover",content:"Удалить"},{reference:i(()=>[a(v,{class:"task__btn",size:18,onClick:t[7]||(t[7]=k=>s.deleteTask(s.tasksItems,o.task)),color:"#f56c6c"},{default:i(()=>[a(T)]),_:1})]),_:1})])]),_:1}),a(f,{prop:"description",class:"task__edit"},{default:i(()=>[s.tasksItems[o.task].editableDesc?B((n(),m(I,{key:0,type:"textarea",modelValue:l.taskForm.description,"onUpdate:modelValue":t[8]||(t[8]=k=>l.taskForm.description=k),class:"task-name-edit",onBlur:t[9]||(t[9]=k=>s.statusEditableDesc(o.task,l.taskForm.description))},null,8,["modelValue"])),[[D]]):b("",!0),s.tasksItems[o.task].editableDesc?b("",!0):(n(),m(g,{key:1,onClick:t[10]||(t[10]=k=>s.statusEditableDesc(o.task)),class:"task__desk"},{default:i(()=>[c(p(s.tasksItems[o.task].description),1)]),_:1}))]),_:1}),a(A,{style:{display:"flex","justify-content":"end"}},{default:i(()=>[s.tasksItems[o.task].updateAt.length==0?(n(),m(g,{key:0,style:{cursor:"default"}},{default:i(()=>[c("Создано: "+p(s.tasksItems[o.task].createAt),1)]),_:1})):(n(),m(g,{key:1,style:{cursor:"default"}},{default:i(()=>{var k;return[c("Обновлено: "+p(s.tasksItems[o.task].updateAt[((k=s.tasksItems[o.task].updateAt)==null?void 0:k.length)-1].dateChange),1)]}),_:1}))]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}const K=F(ht,[["render",pt]]),gt={name:"HomeView",components:{TaskItem:K,AddModalTask:J,LookModalTask:Y},setup(){const e=O(),{tasksItems:t,activeModalValue:o,searchTaskParams:s,filteredTaskItems:l}=C(e),{filteredTask:r,openModal:d}=e;return{tasksItems:t,activeModalValue:o,searchTaskParams:s,filteredTaskItems:l,filteredTask:r,openModal:d}},data(){return{searchTask:""}}},yt={class:"main"},It={key:0,class:"task-container"},vt={key:1,class:"task-container"};function Mt(e,t,o,s,l,r){const d=P("Plus"),h=G,I=L,g=N,f=U,_=K,v=z,u=it,T=H,A=J,x=Y;return n(),M("main",yt,[a(g,{class:"header-task-container"},{default:i(()=>[a(I,{class:"header-task-container__btn",type:"success",onClick:t[0]||(t[0]=y=>s.openModal("add",!1))},{default:i(()=>[a(h,{class:"el-icon--left"},{default:i(()=>[a(d)]),_:1}),c(" Добавить задачу ")]),_:1})]),_:1}),a(T,{class:"page-container"},{default:i(()=>[a(f,{modelValue:l.searchTask,"onUpdate:modelValue":t[1]||(t[1]=y=>l.searchTask=y),class:"task-search",placeholder:"Введите ключевое слово для поиска по задачам","prefix-icon":"Search",clearable:"",onInput:t[2]||(t[2]=y=>s.filteredTask(l.searchTask)),autofocus:""},null,8,["modelValue"]),a(u,{class:"scroll-container",height:"calc(100vh - 200px)"},{default:i(()=>[l.searchTask==""?(n(),M("div",It,[(n(!0),M(w,null,E(s.tasksItems,(y,D)=>(n(),m(_,{key:D,task:y.id,"task-info":y},null,8,["task","task-info"]))),128))])):(n(),M("div",vt,[(n(!0),M(w,null,E(s.filteredTaskItems,(y,D)=>(n(),m(_,{key:D,task:y.id,"task-info":y},null,8,["task","task-info"]))),128))])),s.tasksItems.length==0&&s.filteredTaskItems.length==0?(n(),m(v,{key:2},{default:i(()=>[c("Задачи отсутствуют.")]),_:1})):b("",!0),s.filteredTaskItems.length==0&&l.searchTask!==""?(n(),m(v,{key:3},{default:i(()=>[c("Задачи не найдены. Измените поисковый запрос и повторите попытку.")]),_:1})):b("",!0)]),_:1})]),_:1}),a(A,{ref:"refAddModalTask"},null,512),a(x,{ref:"refModalTask",modalValue:s.activeModalValue},null,8,["modalValue"])])}const Dt=F(gt,[["render",Mt]]);export{Dt as default};
